/* server module file.
*/

var events = require('events');

module.exports = new events.EventEmitter();
var me = module.exports;
var util = require('util');
var net = require('net');
var game = require('game');
var gameZone = require('gamezone');
var gameRoom = require('gameroom');
var gameTable = require('gametable');
var gameUser = require('gameuser');
var fs = require('fs');

var server;

/* Init server
*/
me.initServer = function() {

	fs.readFile("serverconf.json", "utf8", function(err, data){
			if(err) throw err;
			var serverconf = JSON.parse(data);
			me.version = serverconf.version;
		}
	);
	
	setTimeout(function(){
			me.emit('start');
	}, 500);
}
me.startServer = function (){
	me.initServer();
	server = net.createServer(function(s){
		s.end('gdy server ' + me.version + '.');
	});

	server.listen(10086);

}

me.startServer();
